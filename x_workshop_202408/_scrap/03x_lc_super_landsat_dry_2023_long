/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var mcd43a4_202306 = ee.Image("users/servirbz/compil_imagery/optical/modis/mcd43a4_bz/bz_mcd43a4_2023-06"),
    l9_20230608 = ee.Image("users/servirbz/compil_imagery/optical/landsat/bz_landsat_boa/bz_20230608_l9_refl"),
    s2_20230608 = ee.Image("users/servirbz/compil_imagery/optical/sentinel2/bz_s2_boa/bz_sentinel2_boa_2023-06-08_20m_cl"),
    for_bl = 
    /* color: #15b725 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.MultiPolygon(
        [[[[-88.8637136046704, 17.491765138970738],
           [-88.8637136046704, 17.474245850504634],
           [-88.83847938225828, 17.474245850504634],
           [-88.83847938225828, 17.491765138970738]]],
         [[[-89.15012773341283, 17.467626195165586],
           [-89.15012773341283, 17.41538389283803],
           [-88.99546083277806, 17.41538389283803],
           [-88.99546083277806, 17.467626195165586]]],
         [[[-89.14171632594213, 17.84180636363255],
           [-89.14171632594213, 17.706455295841696],
           [-89.02910646266088, 17.706455295841696],
           [-89.02910646266088, 17.84180636363255]]],
         [[[-88.78538017623389, 16.80399779450948],
           [-88.78538017623389, 16.700112025170732],
           [-88.69611626021826, 16.700112025170732],
           [-88.69611626021826, 16.80399779450948]]],
         [[[-89.14449577681982, 16.837518420480617],
           [-89.14449577681982, 16.75337700237728],
           [-89.10055046431982, 16.75337700237728],
           [-89.10055046431982, 16.837518420480617]]],
         [[[-89.05312865115572, 15.94545167267873],
           [-89.05312865115572, 15.925643917413566],
           [-89.02772276736665, 15.925643917413566],
           [-89.02772276736665, 15.94545167267873]]],
         [[[-88.94755690432955, 15.933402187813057],
           [-88.94755690432955, 15.897414490306378],
           [-88.9283308301108, 15.897414490306378],
           [-88.9283308301108, 15.933402187813057]]],
         [[[-89.16282135951569, 15.954130159759588],
           [-89.16282135951569, 15.938119735119562],
           [-89.15286499965241, 15.938119735119562],
           [-89.15286499965241, 15.954130159759588]]],
         [[[-89.15183503139069, 15.96584831980291],
           [-89.15183503139069, 15.954460258155562],
           [-89.13638550746491, 15.954460258155562],
           [-89.13638550746491, 15.96584831980291]]],
         [[[-89.01004273402741, 15.97591548720807],
           [-89.01004273402741, 15.958916533283082],
           [-88.99098832118561, 15.958916533283082],
           [-88.99098832118561, 15.97591548720807]]],
         [[[-89.1635080050235, 15.929536300905712],
           [-89.1635080050235, 15.917816019236025],
           [-89.15286499965241, 15.917816019236025],
           [-89.15286499965241, 15.929536300905712]]],
         [[[-88.32141139332879, 17.713809998670026],
           [-88.32141139332879, 17.693613821481122],
           [-88.30458857838738, 17.693613821481122],
           [-88.30458857838738, 17.713809998670026]]],
         [[[-88.15596999228146, 18.192111109921015],
           [-88.15596999228146, 18.184364595527676],
           [-88.14206542074825, 18.184364595527676],
           [-88.14206542074825, 18.192111109921015]]],
         [[[-88.14172209799435, 18.18387533043484],
           [-88.14172209799435, 18.175720710205148],
           [-88.1334823519006, 18.175720710205148],
           [-88.1334823519006, 18.18387533043484]]],
         [[[-88.3073879748763, 18.333404445253795],
           [-88.3073879748763, 18.31792367041],
           [-88.29176678957357, 18.31792367041],
           [-88.29176678957357, 18.333404445253795]]],
         [[[-88.26000943483724, 18.314501417453936],
           [-88.26000943483724, 18.305375078814528],
           [-88.25108304323568, 18.305375078814528],
           [-88.25108304323568, 18.314501417453936]]],
         [[[-88.33235306095733, 18.031305856060243],
           [-88.33235306095733, 18.00959483950585],
           [-88.30917877506866, 18.00959483950585],
           [-88.30917877506866, 18.031305856060243]]],
         [[[-88.89281455264107, 16.432220816888467],
           [-88.89281455264107, 16.35152564968684],
           [-88.83822623476998, 16.35152564968684],
           [-88.83822623476998, 16.432220816888467]]],
         [[[-88.46860466967244, 17.047016958782535],
           [-88.46860466967244, 17.013041166657338],
           [-88.42534600268026, 17.013041166657338],
           [-88.42534600268026, 17.047016958782535]]]], null, false),
    for_nl = 
    /* color: #9aff07 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.MultiPolygon(
        [[[[-88.96089550419222, 16.95691879000316],
           [-88.96089550419222, 16.94870869656693],
           [-88.95282741947543, 16.94870869656693],
           [-88.95282741947543, 16.95691879000316]]],
         [[[-88.95265575809847, 16.952649586171677],
           [-88.95265575809847, 16.948626593821672],
           [-88.94870754642855, 16.948626593821672],
           [-88.94870754642855, 16.952649586171677]]],
         [[[-88.8737105333763, 16.940253994529957],
           [-88.8737105333763, 16.93224844839727],
           [-88.86551370262679, 16.93224844839727],
           [-88.86551370262679, 16.940253994529957]]]], null, false),
    for_mang = 
    /* color: #926316 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.MultiPolygon(
        [[[[-88.07095439297004, 17.493549049727815],
           [-88.07095439297004, 17.489537812169914],
           [-88.06692035061164, 17.489537812169914],
           [-88.06692035061164, 17.493549049727815]]],
         [[[-88.07095439297004, 17.48933315481976],
           [-88.07095439297004, 17.485362756649877],
           [-88.06683451992316, 17.485362756649877],
           [-88.06683451992316, 17.48933315481976]]],
         [[[-88.15417468033355, 17.514338262304502],
           [-88.15417468033355, 17.510286556908373],
           [-88.14602076492828, 17.510286556908373],
           [-88.14602076492828, 17.514338262304502]]],
         [[[-88.27056000034769, 17.065134250050377],
           [-88.27056000034769, 17.0569904397031],
           [-88.26236316959817, 17.0569904397031],
           [-88.26236316959817, 17.065134250050377]]],
         [[[-88.27482302242117, 17.065132074977093],
           [-88.27482302242117, 17.061090984223412],
           [-88.27068169170218, 17.061090984223412],
           [-88.27068169170218, 17.065132074977093]]],
         [[[-88.26210995453222, 17.6972216643939],
           [-88.26210995453222, 17.68078537233136],
           [-88.2541277005039, 17.68078537233136],
           [-88.2541277005039, 17.6972216643939]]],
         [[[-88.21649471633232, 17.493393761498808],
           [-88.21649471633232, 17.489464383460316],
           [-88.2125465046624, 17.489464383460316],
           [-88.2125465046624, 17.493393761498808]]]], null, false),
    scrub = 
    /* color: #f6a80b */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.MultiPolygon(
        [[[[-88.84860874275047, 16.200126091547023],
           [-88.84860874275047, 16.191966083828618],
           [-88.84066940406639, 16.191966083828618],
           [-88.84066940406639, 16.200126091547023]]],
         [[[-88.84444595435936, 16.191760018658417],
           [-88.84444595435936, 16.187679883977932],
           [-88.84058357337791, 16.187679883977932],
           [-88.84058357337791, 16.191760018658417]]],
         [[[-88.84036899665672, 16.191718805598544],
           [-88.84036899665672, 16.187721097881287],
           [-88.83667827705223, 16.187721097881287],
           [-88.83667827705223, 16.191718805598544]]],
         [[[-88.83221508125145, 16.187515028278483],
           [-88.83221508125145, 16.18355845018595],
           [-88.82818103889305, 16.18355845018595],
           [-88.82818103889305, 16.187515028278483]]],
         [[[-88.83212925056297, 16.183311161422143],
           [-88.83212925056297, 16.179436930353255],
           [-88.82826686958153, 16.179436930353255],
           [-88.82826686958153, 16.183311161422143]]],
         [[[-88.45778621770366, 17.64735709804831],
           [-88.45778621770366, 17.643431061699506],
           [-88.44958938695414, 17.643431061699506],
           [-88.44958938695414, 17.64735709804831]]],
         [[[-88.37868170971917, 17.43113394995442],
           [-88.37868170971917, 17.427121337729286],
           [-88.3705277943139, 17.427121337729286],
           [-88.3705277943139, 17.43113394995442]]]], null, false),
    scrub0 = 
    /* color: #ffab00 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.MultiPolygon(
        [[[[-89.01923258232081, 15.92128814419422],
           [-89.01923258232081, 15.913240510803064],
           [-89.01532728599513, 15.913240510803064],
           [-89.01532728599513, 15.92128814419422]]],
         [[[-89.01502687858546, 15.908824492967092],
           [-89.01502687858546, 15.904944920612706],
           [-89.00695879386866, 15.904944920612706],
           [-89.00695879386866, 15.908824492967092]]],
         [[[-89.02330954002345, 15.925456278850334],
           [-89.02330954002345, 15.921453220479204],
           [-89.01532728599513, 15.921453220479204],
           [-89.01532728599513, 15.925456278850334]]]], null, false),
    savanna = 
    /* color: #f915d8 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.MultiPolygon(
        [[[[-88.39123669698148, 17.389560375512765],
           [-88.39123669698148, 17.381287502752162],
           [-88.3830827815762, 17.381287502752162],
           [-88.3830827815762, 17.389560375512765]]],
         [[[-88.3830827815762, 17.40200993430966],
           [-88.3830827815762, 17.393819530472513],
           [-88.37269726827054, 17.393819530472513],
           [-88.37269726827054, 17.40200993430966]]],
         [[[-88.37492886617093, 17.37309617123187],
           [-88.37492886617093, 17.36490447330495],
           [-88.36651745870023, 17.36490447330495],
           [-88.36651745870023, 17.37309617123187]]],
         [[[-88.47865525319486, 17.381144157601376],
           [-88.47865525319486, 17.372952819667674],
           [-88.46629563405423, 17.372952819667674],
           [-88.46629563405423, 17.381144157601376]]],
         [[[-88.47006421566982, 16.486834501385978],
           [-88.47006421566982, 16.458191372293918],
           [-88.46216779232998, 16.458191372293918],
           [-88.46216779232998, 16.486834501385978]]],
         [[[-88.56173224553905, 16.291470585917335],
           [-88.56173224553905, 16.28339675493586],
           [-88.55374999151073, 16.28339675493586],
           [-88.55374999151073, 16.291470585917335]]],
         [[[-88.38703697742794, 16.75730024682599],
           [-88.38703697742794, 16.740862365737215],
           [-88.37064331592892, 16.740862365737215],
           [-88.37064331592892, 16.75730024682599]]],
         [[[-88.33713375225967, 16.79054830638169],
           [-88.33713375225967, 16.78249533033515],
           [-88.32043968335098, 16.78249533033515],
           [-88.32043968335098, 16.79054830638169]]]], null, false),
    ag_pasture = 
    /* color: #f7ff39 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.MultiPolygon(
        [[[[-88.24564088903074, 18.059042263606877],
           [-88.24564088903074, 18.051045040518073],
           [-88.23722948156004, 18.051045040518073],
           [-88.23722948156004, 18.059042263606877]]],
         [[[-88.23714365087156, 18.04239457333299],
           [-88.23714365087156, 18.034478206975596],
           [-88.22941888890867, 18.034478206975596],
           [-88.22941888890867, 18.04239457333299]]],
         [[[-88.23731531224851, 18.075769971555523],
           [-88.23731531224851, 18.05928707081822],
           [-88.22504152379636, 18.05928707081822],
           [-88.22504152379636, 18.075769971555523]]],
         [[[-88.23308745961039, 18.01755018390932],
           [-88.23308745961039, 18.013632298384763],
           [-88.22913924794047, 18.013632298384763],
           [-88.22913924794047, 18.01755018390932]]],
         [[[-88.26656142811625, 18.021712841803158],
           [-88.26656142811625, 18.017631805597894],
           [-88.26244155506937, 18.017631805597894],
           [-88.26244155506937, 18.021712841803158]]],
         [[[-88.23729316334574, 17.996653787934992],
           [-88.23729316334574, 17.992653804742908],
           [-88.23334495167582, 17.992653804742908],
           [-88.23334495167582, 17.996653787934992]]],
         [[[-88.23317329029886, 18.02154960217053],
           [-88.23317329029886, 18.017631805597894],
           [-88.22913924794047, 18.017631805597894],
           [-88.22913924794047, 18.02154960217053]]],
         [[[-88.77353197634996, 17.52191313802088],
           [-88.77353197634996, 17.51454664105002],
           [-88.75730997622789, 17.51454664105002],
           [-88.75730997622789, 17.52191313802088]]],
         [[[-88.79026896060289, 17.49760256387778],
           [-88.79026896060289, 17.489498316245],
           [-88.78237253726304, 17.489498316245],
           [-88.78237253726304, 17.49760256387778]]],
         [[[-88.81533152163804, 17.521667592938602],
           [-88.81533152163804, 17.514628492658655],
           [-88.8074350982982, 17.514628492658655],
           [-88.8074350982982, 17.521667592938602]]],
         [[[-88.76969268453854, 17.46849671285603],
           [-88.76969268453854, 17.460473044682793],
           [-88.76162459982174, 17.460473044682793],
           [-88.76162459982174, 17.46849671285603]]],
         [[[-88.78917625082272, 17.476765633536687],
           [-88.78917625082272, 17.472999637037034],
           [-88.78239562643307, 17.472999637037034],
           [-88.78239562643307, 17.476765633536687]]],
         [[[-88.79029204977292, 17.44352393095895],
           [-88.79029204977292, 17.43558105041938],
           [-88.77844741476315, 17.43558105041938],
           [-88.77844741476315, 17.44352393095895]]],
         [[[-88.96929566313689, 17.22720593745478],
           [-88.96929566313689, 17.219335676572506],
           [-88.9571935360617, 17.219335676572506],
           [-88.9571935360617, 17.22720593745478]]],
         [[[-88.95264450957244, 17.231386877219645],
           [-88.95264450957244, 17.223434812600615],
           [-88.94449059416716, 17.223434812600615],
           [-88.94449059416716, 17.231386877219645]]],
         [[[-89.04839522463801, 17.27310907356175],
           [-89.04839522463801, 17.264871934907557],
           [-89.0401983938885, 17.264871934907557],
           [-89.0401983938885, 17.27310907356175]]]], null, false),
    ag_het = 
    /* color: #c7ff2f */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.MultiPolygon(
        [[[[-88.6531662851314, 17.389599208869498],
           [-88.6531662851314, 17.389599208869498],
           [-88.6531662851314, 17.389599208869498],
           [-88.6531662851314, 17.389599208869498]]],
         [[[-88.65325211581988, 17.38947634718482],
           [-88.65325211581988, 17.385544729713146],
           [-88.64514111575885, 17.385544729713146],
           [-88.64514111575885, 17.38947634718482]]],
         [[[-88.6738943963985, 17.39363312168465],
           [-88.6738943963985, 17.389619685808928],
           [-88.66591214237017, 17.389619685808928],
           [-88.66591214237017, 17.39363312168465]]],
         [[[-88.66136311588092, 17.39363312168465],
           [-88.66136311588092, 17.389701593543716],
           [-88.65758656558795, 17.389701593543716],
           [-88.65758656558795, 17.39363312168465]]],
         [[[-88.65312336978717, 17.39363312168465],
           [-88.65312336978717, 17.389619685808928],
           [-88.64926098880572, 17.389619685808928],
           [-88.64926098880572, 17.39363312168465]]],
         [[[-89.09830265889059, 17.980096586842386],
           [-89.09830265889059, 17.963727199855196],
           [-89.09431153187643, 17.963727199855196],
           [-89.09431153187643, 17.980096586842386]]],
         [[[-89.10250836262594, 17.975973766972423],
           [-89.10250836262594, 17.97201413648283],
           [-89.09838848957907, 17.97201413648283],
           [-89.09838848957907, 17.975973766972423]]],
         [[[-88.83211209026919, 17.88860969799293],
           [-88.83211209026919, 17.880563912989807],
           [-88.82395817486392, 17.880563912989807],
           [-88.82395817486392, 17.88860969799293]]],
         [[[-88.84434262016238, 17.90090148322144],
           [-88.84434262016238, 17.897226043696932],
           [-88.84065190055789, 17.897226043696932],
           [-88.84065190055789, 17.90090148322144]]],
         [[[-88.37044638329212, 16.707294689546867],
           [-88.37044638329212, 16.695292028493483],
           [-88.35817259483997, 16.695292028493483],
           [-88.35817259483997, 16.707294689546867]]],
         [[[-88.34521216088001, 16.71148722209142],
           [-88.34521216088001, 16.70351311061963],
           [-88.32924765282337, 16.70351311061963],
           [-88.32924765282337, 16.71148722209142]]],
         [[[-88.33276671105091, 16.703348692445417],
           [-88.33276671105091, 16.69496317784822],
           [-88.32409781151478, 16.69496317784822],
           [-88.32409781151478, 16.703348692445417]]]], null, false),
    wetland = 
    /* color: #0ffff9 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.MultiPolygon(
        [[[[-88.89013695784519, 17.688782132559282],
           [-88.89013695784519, 17.67259040886638],
           [-88.87829232283542, 17.67259040886638],
           [-88.87829232283542, 17.688782132559282]]],
         [[[-88.32528524659934, 17.98823921246497],
           [-88.32528524659934, 17.971748115979555],
           [-88.30811910890402, 17.971748115979555],
           [-88.30811910890402, 17.98823921246497]]],
         [[[-88.44507710499013, 18.308751077134016],
           [-88.44507710499013, 18.292290178505517],
           [-88.43718068165029, 18.292290178505517],
           [-88.43718068165029, 18.308751077134016]]],
         [[[-88.54084699978479, 18.38743813017234],
           [-88.54084699978479, 18.375546221629406],
           [-88.52857321133264, 18.375546221629406],
           [-88.52857321133264, 18.38743813017234]]],
         [[[-88.99836217269853, 16.004345525443526],
           [-88.99836217269853, 15.996507495630444],
           [-88.99029408798174, 15.996507495630444],
           [-88.99029408798174, 16.004345525443526]]]], null, false),
    water = 
    /* color: #220dff */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.MultiPolygon(
        [[[[-88.34065298357521, 17.372167954260416],
           [-88.34065298357521, 17.31629302768126],
           [-88.3179936818174, 17.31629302768126],
           [-88.3179936818174, 17.372167954260416]]],
         [[[-88.34538484700349, 17.219047536898017],
           [-88.34538484700349, 17.206503596589084],
           [-88.32899118550446, 17.206503596589084],
           [-88.32899118550446, 17.219047536898017]]],
         [[[-88.22498123603081, 17.888533839125152],
           [-88.22498123603081, 17.8804063656837],
           [-88.2204751248858, 17.8804063656837],
           [-88.2204751248858, 17.888533839125152]]],
         [[[-88.44107820349107, 18.05083134531898],
           [-88.44107820349107, 18.04267052866349],
           [-88.43704416113268, 18.04267052866349],
           [-88.43704416113268, 18.05083134531898]]],
         [[[-88.54935698804373, 18.321210867122975],
           [-88.54935698804373, 18.317014603461327],
           [-88.54519419965261, 18.317014603461327],
           [-88.54519419965261, 18.321210867122975]]],
         [[[-88.6117163471235, 16.278815860221613],
           [-88.6117163471235, 16.275149486535756],
           [-88.60772522010934, 16.275149486535756],
           [-88.60772522010934, 16.278815860221613]]],
         [[[-88.61987026252878, 16.283100075252772],
           [-88.61987026252878, 16.27922780804006],
           [-88.61570747413766, 16.27922780804006],
           [-88.61570747413766, 16.283100075252772]]]], null, false),
    urban = 
    /* color: #ff1200 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      },
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.MultiPolygon(
        [[[[-88.19568077437675, 17.50190712253479],
           [-88.19568077437675, 17.497814210272868],
           [-88.18756977431572, 17.497814210272868],
           [-88.18756977431572, 17.50190712253479]]],
         [[[-88.19160381667412, 17.49347562263819],
           [-88.19160381667412, 17.489423451992177],
           [-88.18748394362724, 17.489423451992177],
           [-88.18748394362724, 17.49347562263819]]],
         [[[-88.187441028283, 17.49765049186501],
           [-88.187441028283, 17.49363934480642],
           [-88.1834069859246, 17.49363934480642],
           [-88.1834069859246, 17.49765049186501]]],
         [[[-88.19160204195542, 17.51016000506487],
           [-88.19160204195542, 17.50612867030443],
           [-88.18748216890855, 17.50612867030443],
           [-88.18748216890855, 17.51016000506487]]],
         [[[-88.2207201030211, 17.514262870638856],
           [-88.2207201030211, 17.510333943891073],
           [-88.21252327227158, 17.510333943891073],
           [-88.21252327227158, 17.514262870638856]]],
         [[[-88.56593120108803, 18.08829650044476],
           [-88.56593120108803, 18.080137424251557],
           [-88.56176841269692, 18.080137424251557],
           [-88.56176841269692, 18.08829650044476]]],
         [[[-89.13994249622442, 17.07346838388144],
           [-89.13994249622442, 17.06938644872092],
           [-89.13584408084967, 17.06938644872092],
           [-89.13584408084967, 17.07346838388144]]]], null, false);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
// Extract forest cover data for Belize for 2024 using Supervised Machine Learning
// Orig.: https://code.earthengine.google.com/?scriptPath=users%2Fbzgeo%2Fbz_lcc%3A2d_classif_2023%2Fbz_l9_s2_mod_20230608e_classif_rf_comparison
// Questions? Contact eac0021@uah.edu or emil.cherrington@nasa.gov
// Last updated: 30 July 2024 | 2 July 2023

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

var x = require('users/servirbz/packages:bz/bz');

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// Original band names
var fro_l9_s2 =  ['B1','B2','B3','B4','B5','B7'];
var fro_mcd = ['b1','b2','b3','b4','b6','b7'];

// Renamed Band names
var to_mcd =  ['B1_MCD','B2_MCD','B3_MCD','B4_MCD','B5_MCD','B7_MCD'];
var to_l9 = ['B1_L9','B2_L9','B3_L9','B4_L9','B5_L9','B7_L9'];
var to_s2 = ['B1_S2','B2_S2','B3_S2','B4_S2','B5_S2','B7_S2'];

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//
var l9 = l9_20230608.clip(x.bz_buff60);
var s2 = s2_20230608.clip(x.bz_buff60);
var mcd = mcd43a4_202306.select(fro_mcd,fro_l9_s2).clip(x.bz_buff60);

var l9_050m = l9.reproject('EPSG:4326', null, 50);
var l9_100m = l9.reproject('EPSG:4326', null, 100);
var s2_100m = s2.reproject('EPSG:4326', null, 100);
var mcd_500m_ = mcd.reproject('EPSG:4326', null, 500);

var l9_500m = l9_20230608.clip(x.bz_buff60).updateMask(x.msk_wtr).reproject('EPSG:4326', null, 500).select(fro_l9_s2,to_l9);
var s2_500m = s2_20230608.clip(x.bz_buff60).updateMask(x.msk_wtr).reproject('EPSG:4326', null, 500).select(fro_l9_s2,to_s2);
var mcd_500m = mcd43a4_202306.clip(x.bz_buff60).updateMask(x.msk_wtr).reproject('EPSG:4326', null, 500).select(fro_mcd,to_mcd);

//
var bz_comb = ee.Image.cat([l9_500m,s2_500m,mcd_500m]);
var bz_comb_b3_b4 = bz_comb.select(['B3_L9','B3_S2','B3_MCD','B4_L9','B4_S2','B4_MCD']);

////////////////////////////////////////////////////////////////////////////////////////////////////////////////

var training_l9_s2_mcd_202306 = ee.FeatureCollection([
  ee.Feature(for_bl, {label: 'For_BL', class: 1}),ee.Feature(for_nl, {label: 'For_NL', class: 2}),
  ee.Feature(for_mang, {label: 'For_mang', class: 3}),ee.Feature(scrub, {label: 'Scrub', class: 4}),
  ee.Feature(savanna, {label: 'Savanna', class: 5}),ee.Feature(ag_pasture, {label: 'Ag_pasture', class: 6}),
  ee.Feature(ag_het, {label: 'Ag_crops', class: 7}),ee.Feature(wetland, {label: 'Wetlands', class: 8}),
  ee.Feature(water, {label: 'Water', class: 9}),ee.Feature(urban, {label: 'Urban', class: 10})]);

var training = training_l9_s2_mcd_202306;
//print(training);

// Band wavelengths
var wl = [0.482,0.5615,0.6545,0.865,1.6085,2.2005];

// Classes - ONLY FOR REFERENCE
var cl10 = ['forest_bl','forest_nl','forest_mg','scrub','savanna','ag_pasture','ag_crops','wetland','water','urban']; 

// Color palette for LC maps
var pal10cl = ['green','limegreen','teal','olive','magenta','yellow','orange','aqua','blue','red'];

////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//
var class_2023_mcd = mcd_500m_.classify(ee.Classifier.smileRandomForest(200)
                            .train({features:mcd_500m_.select(['B1','B2','B3','B4','B5','B7'])
                            .sampleRegions({collection:training,properties:['class'],scale:500}),classProperty:'class',}));

var class_2023_l9 = l9_100m.classify(ee.Classifier.smileRandomForest(200)
                            .train({features:l9_100m.select(['B1','B2','B3','B4','B5','B7'])
                            .sampleRegions({collection:training,properties:['class'],scale:100}),classProperty:'class',}));

var class_2023_l9_ = l9_050m.classify(ee.Classifier.smileRandomForest(20)
                            .train({features:l9_100m.select(['B1','B2','B3','B4','B5','B7'])
                            .sampleRegions({collection:training,properties:['class'],scale:50}),classProperty:'class',}));
                            
var class_2023_s2 = s2_100m.classify(ee.Classifier.smileRandomForest(200)
                            .train({features:s2_100m.select(['B1','B2','B3','B4','B5','B7'])
                            .sampleRegions({collection:training,properties:['class'],scale:100}),classProperty:'class',}));

// ['forest_bl','forest_nl','forest_mg','scrub','savanna','ag_pasture','ag_crops','wetland','water','urban']; 

print(s2_100m.select(['B1','B2','B3','B4','B5','B7']).sampleRegions({collection:for_bl,properties:['class'],scale:100}));
print(s2_100m.select(['B1','B2','B3','B4','B5','B7']).sampleRegions({collection:for_nl,properties:['class'],scale:100}));
print(s2_100m.select(['B1','B2','B3','B4','B5','B7']).sampleRegions({collection:for_mang,properties:['class'],scale:100}));
print(s2_100m.select(['B1','B2','B3','B4','B5','B7']).sampleRegions({collection:scrub,properties:['class'],scale:100}));
print(s2_100m.select(['B1','B2','B3','B4','B5','B7']).sampleRegions({collection:savanna,properties:['class'],scale:100}));
print(s2_100m.select(['B1','B2','B3','B4','B5','B7']).sampleRegions({collection:ag_pasture,properties:['class'],scale:100}));
print(s2_100m.select(['B1','B2','B3','B4','B5','B7']).sampleRegions({collection:ag_het,properties:['class'],scale:100}));
print(s2_100m.select(['B1','B2','B3','B4','B5','B7']).sampleRegions({collection:wetland,properties:['class'],scale:100}));
print(s2_100m.select(['B1','B2','B3','B4','B5','B7']).sampleRegions({collection:water,properties:['class'],scale:100}));
print(s2_100m.select(['B1','B2','B3','B4','B5','B7']).sampleRegions({collection:urban,properties:['class'],scale:100}));

////////////////////////////////////////////////////////////////////////////////////////////////////////////////

var viz = {min: 200, max: 4000, bands: ['B5', 'B4', 'B3']};

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

Map.setCenter(-88.4608, 17.5117, 9);
Map.setOptions('SATELLITE');
Map.addLayer(mcd, viz, 'MCD43A4_2023-06', false);
Map.addLayer(l9_20230608, viz, 'L9_2023-06-08', true);
Map.addLayer(s2_20230608, viz, 'S2_2023-06-08', false);
Map.addLayer(class_2023_mcd,{min:1,max:10,palette: pal10cl}, 'LC_2023_MCD43A4_01', false);
Map.addLayer(class_2023_l9,{min:1,max:10,palette: pal10cl}, 'LC_2023_L9_01', false);
Map.addLayer(class_2023_l9_,{min:1,max:10,palette: pal10cl}, 'LC_2023_L9_02', false);
Map.addLayer(class_2023_s2,{min:1,max:10,palette: pal10cl}, 'LC_2023_S2_01', false);

////////////////////////////////////////////////////////////////////////////////////////////////////////////////

print(ui.Chart.image.regions(
    mcd, training, ee.Reducer.mean(), 100, 'label', wl).setChartType('LineChart')
    .setOptions({title: 'Spectral reflectance - MODIS MCD43A4 (June 2023)',
          vAxis: {title: 'Reflectance x 10,000'}, lineWidth: 1, pointSize: 4, series: {
            0: {color: "green"}, 1: {color: "limegreen"}, 2: {color: "teal"},
            3: {color: "olive"}, 4: {color: "magenta"}, 5: {color: "yellow"},
            6: {color: "orange"}, 7: {color: "aqua"}, 8: {color: "blue"}, 9: {color: "red"},}}));

print(ui.Chart.image.regions(
    l9, training, ee.Reducer.mean(), 100, 'label', wl).setChartType('LineChart')
    .setOptions({title: 'Spectral reflectance - Landsat-9 (8 June 2023)',
          vAxis: {title: 'Reflectance x 10,000'}, lineWidth: 1, pointSize: 4, series: {
            0: {color: "green"}, 1: {color: "limegreen"}, 2: {color: "teal"},
            3: {color: "olive"}, 4: {color: "magenta"}, 5: {color: "yellow"},
            6: {color: "orange"}, 7: {color: "aqua"}, 8: {color: "blue"}, 9: {color: "red"},}}));

print(ui.Chart.image.regions(
    s2, training, ee.Reducer.mean(), 100, 'label', wl).setChartType('LineChart')
    .setOptions({title: 'Spectral reflectance - Sentinel-2 (8 June 2023)',
          vAxis: {title: 'Reflectance x 10,000'}, lineWidth: 1, pointSize: 4, series: {
            0: {color: "green"}, 1: {color: "limegreen"}, 2: {color: "teal"},
            3: {color: "olive"}, 4: {color: "magenta"}, 5: {color: "yellow"},
            6: {color: "orange"}, 7: {color: "aqua"}, 8: {color: "blue"}, 9: {color: "red"},}}));

print(ui.Chart.image.histogram(bz_comb_b3_b4, x.bz_buff60, 500));

////////////////////////////////////////////////////////////////////////////////////////////////////////////////